<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MAMI</title>
</head>
<body>
	<h1>MAMI</h1>
	<p>Welcome.</p>
	<form action="/serial" method="get" id="commandForm">
		<input type="text" id="command" name="data" placeholder="Command">
		<input type="submit" value="Submit">
	</form>
	<p>Response:</p>
	<pre id="response"></pre>
	<script>
		document.getElementById("commandForm").addEventListener("submit", function(event) {
			event.preventDefault();
			var command = document.getElementById("command").value+"\r\n";
			var url = "/serial?data=" + btoa(command);
			var request = new XMLHttpRequest();
			request.open("GET", url, true);
			request.timeout = 10000;
			request.send();
			request.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					document.getElementById("response").innerHTML = this.responseText;
				}
			};
		});
	</script>
</body>
</html>